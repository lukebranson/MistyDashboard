@page
@using MistyDashboard.ApplicationState
@model MistyDashboard.Pages.DashBoard.TasksModel
@inject IAppState singleState
@{
    ViewData["Title"] = "Tasks";
}

<div class="container-fluid">
    <div class="row">
        <!--task running tools-->
        <div class="col-12 mb-2">
            <h1>
                 Run Tasks
            </h1>
        </div>
        <div class="col-12 mb-3">
            <div class="tasks-selector-panel">
                <div class="tasks-selector-padding"> 
                    <!--display the current task-->
                    <p> 
                        Current Task: @(singleState.getCurrentTask()) 
                    </p>
                    <label for="TaskSelection"> Choose a task: </label>
                    <select name="TaskSelection" id="TaskSelection">
                        <!--for each task that exists, add it to the dropdown menu-->
                        @foreach(string taskName in singleState.getTasks())
                        {
                            <option value="@(taskName)">@(taskName)</option>
                        }
                    </select>
                        <div>
                        <button id="run-task-btn" type="button" class="btn-success btn button-select-robot" onclick="startTask()">
                            Run
                        </button>
                        <button id="stop-task-btn" type="button" class="btn-danger btn button-select-robot" onclick="endTask()">
                            Stop
                        </button>
                        </div>
                </div>
            </div>
        </div>
        <!--task running info-->
        <div class="col-12 mb-2">
            <h1>
                 Task Info
            </h1>
        </div>
        <div class="col-12">
            <div class="tasks-info-panel">
                <div class="tasks-selector-padding">
                    <!--let the user know if no task is running-->
                    @if (singleState.getCurrentTask() == "none")
                    {
                        <p> 
                            no task running...
                        </p>
                    }
                    else
                    {
                        <p> 
                            Current Task: @(singleState.getCurrentTask()) 
                        </p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
